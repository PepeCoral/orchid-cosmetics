{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block content %}
<div class="container mt-5">

  <!-- ⭐ SLIDER DE PRODUCTOS -->
  <h2 class="text-center mb-4" style="color: #a97acf;">Productos Destacados</h2>

  <div class="slider-container">

    <div class="slider" id="productSlider">
      {% for p in products %}
      <a href="/products/{{ p.id }}" class="product-card text-decoration-none text-dark">

        {% if p.image_url %}
        <img src="{{ p.image_url.url }}" alt="{{ p.name }}">
        {% else %}
        <div class="no-img">Sin imagen</div>
        {% endif %}

        <div class="card-body">
          <h5 class="card-title">{{ p.name }}</h5>
          <p class="text-muted">Fabricante: {{ p.fabricator }}</p>
          <span class="badge bg-success p-2"><strong>{{ p.price }} €</strong></span>
        </div>

      </a>
      {% endfor %}
    </div>


  </div>

  <hr class="my-5">

  <!-- ⭐ SLIDER DE SERVICIOS -->
  <h2 class="text-center mb-4" style="color: #a97acf;">Servicios Destacados</h2>

  <div class="slider-container">

    <div class="slider" id="serviceSlider">

      {% for s in services %}
      <a href="/services/{{ s.id }}" class="product-card text-decoration-none text-dark">

        {% if s.image_url %}
        <img src="{{ s.image_url.url }}" alt="{{ s.name }}">
        {% else %}
        <div class="no-img">Sin imagen</div>
        {% endif %}

        <div class="card-body">
          <h5 class="card-title">{{ s.name }}</h5>
          <p class="text-muted">Departamento: {{ s.departament }}</p>
          <span class="badge bg-success p-2"><strong>{{ s.price }} €</strong></span>
        </div>

      </a>
      {% endfor %}

    </div>
    <div class="text-center">
      <h4 style="color: #a97acf;">¿Quieres ver el resto del catalogo?</h4>
    </div>
    <div class="card-body">
      <div class="row justify-content-center text-center">
        <div class="col-md-6">
          <a href="{% url 'product_catalog' %}" class="btn text-white btn-lg"
            style="background-color: #a97acf; border-color: #a97acf;">
            Catalogo de Productos
          </a>
        </div>
        <div class="col-md-6">
          <a href="{% url 'service_catalog' %}" class="btn text-white btn-lg"
            style="background-color: #a97acf; border-color: #a97acf;">
            Catalogo de Productos
          </a>

        </div>
      </div>
    </div>
  </div>

</div>

<style>
  /* Cards */
  .product-card {
    flex: 0 0 250px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    transition: .2s ease;
    margin-right: 20px;
    cursor: pointer;
    text-decoration: none;
    color: inherit;
  }

  .product-card:hover {
    transform: translateY(-5px);
  }

  .product-card img {
    width: 100%;
    height: 180px;
    object-fit: contain;
    padding: 15px;
  }

  .no-img {
    height: 180px;
    background: #eee;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .card-title {
    font-size: 1.1rem;
    color: #6d4d8f;
  }

  /* Slider containers */
  .slider-container {
    position: relative;
    overflow: hidden;
    padding: 10px;
  }

  .slider {
    display: flex;
    overflow-x: auto;
    scroll-behavior: smooth;
    padding: 10px;
  }

  .slider::-webkit-scrollbar {
    height: 8px;
  }

  .slider::-webkit-scrollbar-thumb {
    background-color: #a97acf;
    border-radius: 10px;
  }

  /* Button controls */
  .slider-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: #a97acf;
    color: white;
    border: none;
    font-size: 22px;
    padding: 8px 12px;
    border-radius: 50%;
    cursor: pointer;
    z-index: 10;
  }

  .slider-btn.left {
    left: 0;
  }

  .slider-btn.right {
    right: 0;
  }
</style>

<script>
  function slideLeft(id) {
    document.getElementById(id)
      .scrollBy({ left: -300, behavior: 'smooth' });
  }

  function slideRight(id) {
    document.getElementById(id)
      .scrollBy({ left: 300, behavior: 'smooth' });
  }
</script>

{% endblock %}
